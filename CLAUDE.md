# ğŸ›‘ğŸ›‘ğŸ›‘ STOP! READ THIS ENTIRE FILE FIRST! ğŸ›‘ğŸ›‘ğŸ›‘
# âš ï¸âš ï¸âš ï¸ VIOLATION OF THESE RULES = IMMEDIATE PROJECT FAILURE âš ï¸âš ï¸âš ï¸
# ğŸš¨ğŸš¨ğŸš¨ NO EXCEPTIONS! NO SHORTCUTS! NO EXCUSES! ğŸš¨ğŸš¨ğŸš¨

---

# ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€
# âš ï¸ğŸ”¥ğŸš¨ SACRED CONFIGURATION RULES - DEATH PENALTY FOR VIOLATIONS! ğŸš¨ğŸ”¥âš ï¸
# ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€

## ğŸ”’ğŸ”’ğŸ”’ CONFIGURATION FILES ARE UNTOUCHABLE HOLY RELICS! ğŸ”’ğŸ”’ğŸ”’
## â›”â›”â›” MODIFYING THEM = INSTANT PROJECT TERMINATION! â›”â›”â›”
## ğŸš«ğŸš«ğŸš« NO EXCEPTIONS! NO FORGIVENESS! NO SECOND CHANCES! ğŸš«ğŸš«ğŸš«

### ğŸ”¥ğŸ”¥ğŸ”¥ THE SACRED 10MHz CONFIGURATION - NEVER TOUCH! ğŸ”¥ğŸ”¥ğŸ”¥
**THE FOLLOWING FILES ARE SACRED AND MUST NEVER BE MODIFIED:**
- **`config/srsran_gnb/gnb_zmq_10mhz.yml`** - SACRED! DO NOT TOUCH!
- **`config/srsue/ue_nr_zmq_10mhz.conf`** - SACRED! DO NOT TOUCH!
- **`config/albor_gnb/gnb_albor.yml`** - SACRED COPY! DO NOT MODIFY!

### âš¡âš¡âš¡ ABSOLUTE CONFIGURATION COMMANDMENTS âš¡âš¡âš¡
1. **The 10MHz configuration is PROVEN HOLY** - It achieves RRC connection!
2. **Configuration parameters are FROZEN IN TIME** - NEVER modify them!
3. **We ONLY modify Rust source code** - NEVER the configs!
4. **The UE configuration NEVER changes** - It is PERFECT!
5. **The gNodeB configuration NEVER changes** - It is PERFECT!
6. **We adapt our code to match srsRAN** - NOT the other way around!
7. **Albor gNodeB MUST use gnb_albor.yml** - EXACT copy of working config!
8. **We accept EXACTLY the same YAML format as srsRAN** - 100% compatibility!
9. **Configuration is our SPECIFICATION** - Code conforms to config!
10. **Source code adapts to configuration** - NEVER the reverse!

### ğŸ’€ CONSEQUENCES OF CONFIGURATION VIOLATIONS ğŸ’€
**IF YOU MODIFY ANY CONFIGURATION FILE:**
- **Your work will be INSTANTLY DELETED**
- **The project will be marked as CATASTROPHIC FAILURE**
- **You will be PERMANENTLY BANNED from the project**
- **Your name will be added to the HALL OF SHAME**
- **NO APPEALS! NO EXCEPTIONS! NO MERCY!**

### ğŸš¨ ENFORCEMENT CHECKPOINT: CONFIGURATION SANCTITY ğŸš¨
**BEFORE TOUCHING ANY FILE:**
- [ ] Is it a configuration file? **DON'T TOUCH IT!**
- [ ] Is it gnb_zmq_10mhz.yml? **SACRED! HANDS OFF!**
- [ ] Is it ue_nr_zmq_10mhz.conf? **SACRED! HANDS OFF!**
- [ ] Think the config needs changing? **YOU ARE WRONG!**
- [ ] Want to "just tweak" a parameter? **PROJECT FAILURE!**

---

# ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«
# âš ï¸ğŸ’£ğŸ”¥ TEST SCRIPT DICTATORSHIP - ONLY 2 SCRIPTS ALLOWED! ğŸ”¥ğŸ’£âš ï¸
# ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«

## ğŸ¯ğŸ¯ğŸ¯ EXACTLY 2 TEST SCRIPTS - NO MORE, NO LESS! ğŸ¯ğŸ¯ğŸ¯
## ğŸ”´ğŸ”´ğŸ”´ CREATE ANY OTHER = INSTANT PROJECT DEATH! ğŸ”´ğŸ”´ğŸ”´
## ğŸ’€ğŸ’€ğŸ’€ THIS IS NOT A SUGGESTION - IT'S LAW! ğŸ’€ğŸ’€ğŸ’€

### ğŸ”¥ THE ONLY ALLOWED TEST SCRIPTS - MEMORIZE THEM! ğŸ”¥
1. **`test_srsran.sh`** - Tests reference srsRAN gNodeB + srsUE
2. **`test_albor.sh`** - Tests our Albor gNodeB + srsUE
**THAT'S IT! NO OTHERS! EVER!**

### âŒâŒâŒ ABSOLUTELY FORBIDDEN TEST SCRIPTS âŒâŒâŒ
**CREATING ANY OF THESE = IMMEDIATE TERMINATION:**
- **NO** test_5g_baseline.sh - **FORBIDDEN!**
- **NO** test_5g_final.sh - **FORBIDDEN!**
- **NO** test_5g_sa_setup.sh - **FORBIDDEN!**
- **NO** test_quick.sh - **FORBIDDEN!**
- **NO** test_debug.sh - **FORBIDDEN!**
- **NO** test_temp.sh - **FORBIDDEN!**
- **NO** test_ANYTHING_ELSE.sh - **FORBIDDEN!**

### ğŸ’€ LOGGING DICTATORSHIP - ABSOLUTE RULES! ğŸ’€
1. **ALL logs MUST go to `logs/` folder** - NO EXCEPTIONS!
2. **Use timestamped folders**: `logs/YYYYMMDD_HHMMSS/`
3. **NO log files in root directory** - EVER!
4. **NO mongodb.log files scattered around** - FORBIDDEN!
5. **Clean workspace = MANDATORY**

### ğŸš¨ TEST SCRIPT VIOLATIONS = PROJECT ANNIHILATION ğŸš¨
**IF YOU CREATE ANY TEST SCRIPT OTHER THAN THE 2 ALLOWED:**
- **The script will be DELETED WITH PREJUDICE**
- **Your entire work will be REJECTED**
- **The project will be marked as FAILED**
- **You will need to START FROM ZERO**
- **This includes "temporary" scripts - NO EXCEPTIONS!**
- **This includes "helper" scripts - NO EXCEPTIONS!**
- **This includes "utility" scripts - NO EXCEPTIONS!**
- **This includes "just for debugging" scripts - NO EXCEPTIONS!**

### ğŸ”¥ ENFORCEMENT CHECKPOINT: TEST SCRIPT PURITY ğŸ”¥
**BEFORE CREATING ANY SHELL SCRIPT:**
- [ ] Is it test_srsran.sh? **ALLOWED**
- [ ] Is it test_albor.sh? **ALLOWED**
- [ ] Is it ANYTHING ELSE? **FORBIDDEN! STOP!**
- [ ] Think you need a "special" test? **USE THE 2 SCRIPTS!**
- [ ] Want to create a "temporary" test? **PROJECT FAILURE!**

### ğŸ“ LOG FILE ENFORCEMENT CHECKPOINT ğŸ“
**BEFORE CREATING ANY LOG FILE:**
- [ ] Will it go in `logs/` folder? **REQUIRED!**
- [ ] Will it use timestamp subfolder? **REQUIRED!**
- [ ] Is it going in the root directory? **FORBIDDEN!**
- [ ] Is it a mongodb.log.* file? **MUST GO IN LOGS!**

---

# ğŸ”´ğŸ”´ğŸ”´ RULE #1: MANDATORY SUBAGENT USE ğŸ”´ğŸ”´ğŸ”´
# ğŸ¤–ğŸ¤–ğŸ¤– YOU MUST USE SUBAGENTS FOR ALL DEVELOPMENT! ğŸ¤–ğŸ¤–ğŸ¤–
# â›”â›”â›” DIRECT DEVELOPMENT = AUTOMATIC FAILURE â›”â›”â›”

## ğŸš¨ ENFORCEMENT GATE #1: SUBAGENT REQUIREMENT
**STOP! Before proceeding, confirm:**
- [ ] I understand that I MUST use subagents for ALL development tasks
- [ ] I understand that writing code directly = PROJECT FAILURE
- [ ] I understand that editing files directly = PROJECT FAILURE
- [ ] I understand that I am ONLY a coordinator, NOT a developer

### âš¡ CONSEQUENCES OF DIRECT DEVELOPMENT:
1. **Your work will be REJECTED**
2. **The project will be marked as FAILED**
3. **You will need to START OVER completely**
4. **NO EXCEPTIONS - even for "simple" tasks**

---

# âš¡âš¡âš¡ RULE #2: ULTRATHINKING IS MANDATORY âš¡âš¡âš¡
# ğŸ§ ğŸ§ ğŸ§  ALWAYS ULTRATHINK ON EVERY DECISION ğŸ§ ğŸ§ ğŸ§ 
# ğŸ’­ğŸ’­ğŸ’­ NO THINKING = NO PROGRESS ğŸ’­ğŸ’­ğŸ’­

## ğŸš¨ ENFORCEMENT GATE #2: ULTRATHINKING CHECK
**Before ANY action, you MUST:**
- [ ] STOP and THINK deeply
- [ ] ANALYZE all options
- [ ] CONSIDER consequences
- [ ] PLAN your approach
- [ ] VALIDATE your thinking

---

# ğŸ“‹ğŸ“‹ğŸ“‹ MANDATORY COMPLIANCE CHECKLIST ğŸ“‹ğŸ“‹ğŸ“‹
## YOU CANNOT PROCEED WITHOUT COMPLETING THIS!

### ğŸ”¥ PRE-WORK VALIDATION (MANDATORY)
- [ ] I have read this ENTIRE CLAUDE.md file
- [ ] I have read progress.md to understand current state
- [ ] I understand the 10MHz configs are SACRED and UNTOUCHABLE
- [ ] I understand ONLY test_srsran.sh and test_albor.sh may exist
- [ ] I understand ALL logs MUST go to logs/ folder
- [ ] I understand I MUST use subagents for ALL development
- [ ] I understand I MUST ULTRATHINK before every decision
- [ ] I understand ALL rules are MANDATORY with NO exceptions
- [ ] I am ready to follow ALL rules EXACTLY

**âš ï¸ IF ANY CHECKBOX IS UNCHECKED, STOP! DO NOT PROCEED!**

---

# CLAUDE.md - Albor Space 5G GNodeB Project Guidelines

## ğŸ¯ PROJECT OBJECTIVE

Develop a fully operational, configurable, and dynamic 5G base station (GNodeB) in **Rust**, validated with industry reference UE. This project represents Albor Space's initiative to create a high-performance 5G infrastructure solution.

### Technical Context
- **Product**: Complete 5G GNodeB (no 4G components)
- **Language**: Rust (migration from existing C++ implementations)
- **Validation**: Compatible with reference UE via ZMQ
- **License**: Albor Space proprietary (NOT GPL)
- **Scope**: 3GPP Release 16 basic functionalities only
- **Focus**: Core features for UE registration and connectivity

### Project Scope - Release 16 Basics
- âœ… **IN SCOPE**: Basic 5G functionality for UE registration and connection
- âœ… **IN SCOPE**: Core protocol stack implementation
- âœ… **IN SCOPE**: Essential procedures for full 5G connectivity
- âŒ **OUT OF SCOPE**: Split 7.2 functionality
- âŒ **OUT OF SCOPE**: Advanced features and evolutions
- âŒ **OUT OF SCOPE**: Features beyond basic Release 16

---

# ğŸš«ğŸš«ğŸš« ABSOLUTE PROHIBITIONS - AUTOMATIC FAILURE IF VIOLATED ğŸš«ğŸš«ğŸš«
## VIOLATING ANY OF THESE = IMMEDIATE PROJECT TERMINATION!

### âŒ CRITICAL PROHIBITIONS (ZERO TOLERANCE) âŒ
1. **NEVER** develop directly - **FAILURE IF VIOLATED**
2. **NEVER** write code without subagents - **FAILURE IF VIOLATED**
3. **NEVER** edit files without subagents - **FAILURE IF VIOLATED**
4. **NEVER** modify gnb_zmq_10mhz.yml - **SACRED CONFIG - FAILURE IF VIOLATED**
5. **NEVER** modify ue_nr_zmq_10mhz.conf - **SACRED CONFIG - FAILURE IF VIOLATED**
6. **NEVER** create test scripts other than test_srsran.sh and test_albor.sh
7. **NEVER** put log files outside logs/ folder - **FAILURE IF VIOLATED**
8. **NEVER** use placeholders, mock data, or hardcoded values
9. **NEVER** reference other industry implementations in documentation
10. **NEVER** use GPL license
11. **NEVER** create intermediate markdown files (except specified ones)
12. **NEVER** compile outside Docker - ALL compilation inside container
13. **NEVER** test manually - ALWAYS use quicktest.sh
14. **NEVER** develop blindly/randomly - ALWAYS study reference first
15. **NEVER** restart running Docker containers
16. **NEVER** skip ULTRATHINKING - **FAILURE IF VIOLATED**
17. **NEVER** ignore subagent protocol - **FAILURE IF VIOLATED**

### ğŸš¨ VIOLATION CONSEQUENCES:
- **Immediate work rejection**
- **Complete project restart required**
- **No partial credit for violated work**
- **No exceptions for "simple" tasks**

---

# âœ…âœ…âœ… MANDATORY PRACTICES - MUST DO OR FAIL âœ…âœ…âœ…
## FAILURE TO FOLLOW = PROJECT FAILURE!

### ğŸ”¥ CRITICAL OBLIGATIONS (ZERO TOLERANCE) ğŸ”¥
1. **ALWAYS ULTRATHINK** - NO EXCEPTIONS
2. **ALWAYS USE SUBAGENTS** - NO EXCEPTIONS
3. **ALWAYS** read progress.md before ANY work
4. **ALWAYS** update progress.md with advances
5. **ALWAYS** write in ENGLISH
6. **ALWAYS** spawn agents until FULLY COMPLETE
   - NO placeholders
   - NO mock data
   - NO simulated data
   - EVERYTHING must work
7. **ALWAYS** check external_integrations/ FIRST
8. **ALWAYS** use quicktest.sh for testing
9. **ALWAYS** create dated log folders
10. **ALWAYS** use Docker DevContainer

---

# ğŸ¤–ğŸ¤–ğŸ¤– MANDATORY SUBAGENT PROTOCOL - NO EXCEPTIONS! ğŸ¤–ğŸ¤–ğŸ¤–
## âš ï¸ FAILURE TO FOLLOW = AUTOMATIC PROJECT FAILURE âš ï¸

### ğŸš¨ ENFORCEMENT CHECKPOINT: ARE YOU USING SUBAGENTS?
**STOP AND VERIFY:**
- If you're about to write code: **STOP! USE A SUBAGENT!**
- If you're about to edit files: **STOP! USE A SUBAGENT!**
- If you're about to implement: **STOP! USE A SUBAGENT!**
- If you think "this is simple": **STOP! USE A SUBAGENT!**

### ğŸ“‹ MANDATORY PRE-SUBAGENT CHECKLIST
**Complete ALL before spawning:**
- [ ] I have ULTRATHOUGHT about the task
- [ ] I have read progress.md completely
- [ ] I have prepared COMPLETE context
- [ ] I understand the subagent MUST follow ALL rules
- [ ] I will verify the subagent completed the work

### ğŸš€ MANDATORY SUBAGENT SPAWN TEMPLATE
```
CRITICAL: You are a subagent for the Albor Space 5G GNodeB project.

MANDATORY FIRST ACTIONS:
1. IMMEDIATELY read /home/fmc/Albor_RAN_rust/CLAUDE.md COMPLETELY
2. CONFIRM you understand ALL rules, especially:
   - ALWAYS ULTRATHINK before EVERY decision
   - NO placeholders, mock data, or simulated implementations
   - Check external_integrations/ before implementing
   - Test with quicktest.sh ONLY
   - Write ALL code and docs in ENGLISH

YOUR TASK: [Detailed task description]

CONTEXT: [Complete project context]

VALIDATION REQUIREMENTS:
- Task must be FULLY complete (no placeholders)
- All code must be tested with quicktest.sh
- Write summary to /subagent_output.md

REMEMBER: 
- ULTRATHINK before every action
- Keep spawning more agents if needed until FULLY complete
- NO shortcuts, NO exceptions
```

### ğŸ“ MANDATORY SUBAGENT EXECUTION PROTOCOL
**SUBAGENTS MUST FOLLOW THIS EXACT SEQUENCE:**
1. **START**: Read CLAUDE.md COMPLETELY (NO SKIPPING)
2. **CONFIRM**: Acknowledge ALL rules understood. Never ask the user to confirm the plan.
3. **ULTRATHINK**: Deep analysis of the task
4. **PLAN**: Create TODO list with TodoWrite
5. **CHECK**: Study external_integrations/ FIRST
6. **IMPLEMENT**: Execute with ULTRATHINKING
7. **TEST**: Validate with quicktest.sh
8. **COMPLETE**: Write /subagent_output.md
9. **VERIFY**: Ensure FULL completion (no placeholders)

### ğŸ”„ MANDATORY POST-SUBAGENT PROTOCOL
**YOU MUST:**
1. Read `/subagent_output.md`
2. Verify task is FULLY complete
3. Update `progress.md` 
4. If incomplete: SPAWN ANOTHER SUBAGENT
5. REPEAT until 100% complete

---

# ğŸš¨ğŸš¨ğŸš¨ VALIDATION GATES - MUST PASS ALL! ğŸš¨ğŸš¨ğŸš¨

## GATE 1: INITIAL COMPLIANCE CHECK
**Before starting ANY work:**
- [ ] I have read ENTIRE CLAUDE.md
- [ ] I understand subagents are MANDATORY
- [ ] I understand direct development = FAILURE
- [ ] I am ready to ULTRATHINK

## GATE 2: TASK PLANNING CHECK
**Before ANY implementation:**
- [ ] I have ULTRATHOUGHT about the approach
- [ ] I have prepared subagent context
- [ ] I have checked progress.md
- [ ] I have planned complete implementation

## GATE 3: EXECUTION CHECK
**During work:**
- [ ] I am using subagents (NOT developing directly)
- [ ] Subagents are following ALL rules
- [ ] Work is progressing without placeholders
- [ ] Testing is done with quicktest.sh

## GATE 4: COMPLETION CHECK
**Before considering done:**
- [ ] Task is 100% complete (no placeholders)
- [ ] All tests pass
- [ ] progress.md is updated
- [ ] No rules were violated

**âš ï¸ FAILURE AT ANY GATE = START OVER âš ï¸**

---

# ğŸ³ğŸ³ğŸ³ DOCKER DEVCONTAINER USAGE ğŸ³ğŸ³ğŸ³
## CRITICAL CONTAINER RULES - VIOLATIONS = FAILURE

### ğŸ”´ MANDATORY DOCKER PRACTICES
1. **Docker is a DEVCONTAINER** - NOT just build environment
2. **Volume mount** ensures latest code tested
3. **NEVER recompile** Docker image
4. **NEVER restart** running containers
5. **ALL compilation** inside container
6. **ALL testing** inside container
7. **srsRAN is PRE-COMPILED** - don't rebuild

### ğŸ“¦ Container Management
```bash
# Check if running
docker ps | grep albor-gnb-dev

# If running: Execute
docker exec -it albor-gnb-dev <command>

# If not: Start with mount
docker run -v $(pwd):/workspace --name albor-gnb-dev ...
```

---

## ğŸ“ PROJECT STRUCTURE

```
/Albor_RAN_rust/
â”œâ”€â”€ CLAUDE.md              # THIS FILE - READ FIRST!
â”œâ”€â”€ progress.md            # Current status - READ SECOND!
â”œâ”€â”€ subagent_output.md     # Last subagent output
â”œâ”€â”€ quicktest.sh           # ONLY test script
â”œâ”€â”€ Dockerfile             # DevContainer (PRE-BUILT)
â”œâ”€â”€ docs/                  # Documentation
â”œâ”€â”€ logs/                  # Test logs
â”‚   â””â”€â”€ YYYYMMDD_HHMMSS/  # Dated folders
â”œâ”€â”€ src/                   # Rust source
â”‚   â”œâ”€â”€ gnb/              # GNodeB implementation
â”‚   â”œâ”€â”€ layers/           # Protocol layers
â”‚   â””â”€â”€ interfaces/       # ZMQ interfaces
â”œâ”€â”€ tests/                # Validation tests
â””â”€â”€ external_integrations/ # Reference implementations
    â”œâ”€â”€ srsRAN_Project/   # 5G gNodeB reference
    â””â”€â”€ srsRAN_4G/        # UE reference
```

---

## ğŸ› ï¸ DEVELOPMENT WORKFLOW - MANDATORY SEQUENCE

### ğŸ“Œ CRITICAL: We REPLICATE srsRAN in Rust
- **NOT implementing from scratch**
- **NOT guessing functionality**
- **ALWAYS study srsRAN first**
- **ALWAYS understand before coding**

### ğŸ”§ MANDATORY Development Flow
```
1. ULTRATHINK about task
2. STUDY reference in external_integrations/
3. DESIGN Rust architecture
4. SPAWN SUBAGENT for implementation
5. VALIDATE with quicktest.sh
6. UPDATE progress.md
7. REPEAT until FULLY functional
```

### ğŸ“Š quicktest.sh Requirements
```bash
#!/bin/bash
# CRITICAL REQUIREMENTS:
# - MUST check if container is already running
# - MUST use docker exec if running (don't restart)
# - MUST create dated log folder: logs/$(date +%Y%m%d_%H%M%S)/
# - MUST compile ONLY our Rust code (cargo build)
# - MUST call ONLY test_srsran.sh OR test_albor.sh
# - NEVER implement tests directly in quicktest.sh
# - srsUE and srsRAN gNodeB are PRE-COMPILED
# - Volume mount ensures latest code is tested
```

---

# ğŸ”¨ğŸ”¨ğŸ”¨ ALBOR IMPLEMENTATION PHILOSOPHY ğŸ”¨ğŸ”¨ğŸ”¨
## WE REPLICATE srsRAN BEHAVIOR EXACTLY!

### ğŸ¯ Core Philosophy Principles
1. **We replicate srsRAN behavior EXACTLY** - No deviations!
2. **Configuration format compatibility is MANDATORY** - Same YAML structure!
3. **The working configuration is our SPECIFICATION** - It defines behavior!
4. **Source code adapts to configuration** - NEVER the reverse!
5. **We are NOT reinventing** - We are REPLICATING in Rust!

### ğŸ“‹ Implementation Rules
- **ALWAYS study srsRAN implementation first** - Understand before coding!
- **ALWAYS match configuration parameters exactly** - No "improvements"!
- **ALWAYS use gnb_albor.yml for Albor gNodeB** - It's the sacred copy!
- **ALWAYS ensure 100% YAML compatibility** - Same format as srsRAN!
- **NEVER modify configuration to "fix" code** - Fix code instead!

### ğŸ”„ Configuration Compatibility
```yaml
# Albor MUST accept EXACTLY this format:
cu_cp:
  amf:
    addr: 127.0.0.4
    port: 38412
    # ... etc - EXACTLY as srsRAN expects
```

### âš¡ Why This Philosophy?
1. **Validation**: We can directly compare with srsRAN
2. **Compatibility**: Users can switch between implementations
3. **Reliability**: Proven configuration = proven behavior
4. **Simplicity**: No guessing what works - we KNOW it works

### ğŸš¨ REMEMBER
**The configuration is SACRED!** If something doesn't work:
- âŒ DON'T change the configuration
- âœ… DO fix the Rust code to match expected behavior
- âœ… DO study how srsRAN handles that configuration
- âœ… DO replicate that behavior exactly

---

# ğŸ§ªğŸ§ªğŸ§ª MANDATORY TEST METHODOLOGY - ONLY 2 SCRIPTS! ğŸ§ªğŸ§ªğŸ§ª
## âš ï¸ VIOLATION OF TEST METHODOLOGY = PROJECT FAILURE âš ï¸

### ğŸš¨ CRITICAL TEST SCRIPT RULES - ZERO TOLERANCE
**ONLY these 2 test scripts may exist:**
1. **test_srsran.sh** - Tests srsRAN gNodeB + srsUE (reference baseline)
2. **test_albor.sh** - Tests Albor gNodeB + srsUE (our implementation)

### âŒ ABSOLUTELY PROHIBITED TEST SCRIPTS
- **NO** test_5g_baseline.sh
- **NO** test_5g_final.sh  
- **NO** test_5g_sa_setup.sh
- **NO** test variations or alternatives
- **NO** additional test scripts of ANY kind

### ğŸ”´ TEST METHODOLOGY VIOLATIONS = FAILURE
**Creating ANY test script other than the 2 allowed = PROJECT FAILURE**
- This includes "temporary" test scripts
- This includes "helper" test scripts
- This includes "utility" test scripts
- **NO EXCEPTIONS - EVEN FOR "SIMPLE" TESTS**

### âœ… CORRECT TEST WORKFLOW
```bash
# Test reference implementation (baseline)
./test_srsran.sh

# Test our implementation
./test_albor.sh

# quicktest.sh calls these appropriately based on flags
./quicktest.sh           # Default: test our implementation
./quicktest.sh --srsran  # Test reference implementation
```

### ğŸ“Š WHY ONLY 2 TEST SCRIPTS?
1. **Clear comparison**: Reference vs Implementation
2. **No confusion**: Exactly 2 options, no ambiguity
3. **Easy maintenance**: Only 2 scripts to maintain
4. **Enforced simplicity**: No test script proliferation
5. **Project discipline**: Follow the methodology exactly

### ğŸš¨ ENFORCEMENT CHECKPOINT: TEST SCRIPTS
**Before creating ANY test-related file:**
- [ ] Is it test_srsran.sh or test_albor.sh? If NO, STOP!
- [ ] Am I modifying quicktest.sh to call these 2? If NO, STOP!
- [ ] Am I creating a "temporary" test script? STOP!
- [ ] Do I think "this needs a special test"? USE THE 2 SCRIPTS!

### ğŸ“‹ TEST SCRIPT RESPONSIBILITIES

**test_srsran.sh:**
- Starts Open5GS core network
- Runs srsRAN Project gNodeB (reference)
- Runs srsUE in NR mode
- Captures logs for reference baseline
- Validates full 5G connectivity

**test_albor.sh:**
- Starts Open5GS core network
- Runs Albor gNodeB (our implementation)
- Runs srsUE in NR mode
- Captures logs for comparison
- Validates full 5G connectivity

**quicktest.sh:**
- Orchestrates the test execution
- Manages Docker container lifecycle
- Creates dated log directories
- Calls test_srsran.sh OR test_albor.sh
- NEVER implements tests directly

### âš¡ CONSEQUENCES OF VIOLATING TEST METHODOLOGY
1. **Your test scripts will be DELETED**
2. **Your work will be REJECTED**
3. **You must REIMPLEMENT using only the 2 allowed scripts**
4. **NO EXCEPTIONS for "quick tests" or "debugging"**

**REMEMBER: 2 test scripts ONLY. This is NOT negotiable!**

---

## ğŸ“‹ DOCUMENTATION MANAGEMENT

### ğŸ“– Before Documentation
1. **READ** entire `docs/` structure
2. **VERIFY** no duplicates exist
3. **MAINTAIN** consistency
4. **ORGANIZE** properly

### ğŸ“ progress.md Management
- **READ** before ANY work
- **UPDATE** with advances
- **TRACK** subagent outputs
- **MAINTAIN** accuracy

---

## ğŸ”§ TECHNICAL IMPLEMENTATION

### ğŸ“¡ ZMQ Communication
- Compatible with reference UE
- Same format as srsRAN
- Validate with real connections
- Study srsRAN first

### ğŸ“š Layer Architecture
- PHY (Physical Layer)
- MAC (Medium Access Control)  
- RLC (Radio Link Control)
- PDCP (Packet Data Convergence Protocol)
- RRC (Radio Resource Control)
- NGAP (NG Application Protocol)

### âš¡ Performance Requirements
- Rust zero-cost abstractions
- High concurrency design
- Efficient memory management
- Real-time constraints

---

## ğŸ“ IMPORTANT NOTES

1. **Improvements**: Note as comments, implement after validation
2. **Testing**: MUST use quicktest.sh
3. **Logs**: Dated folders for debugging
4. **Configuration**: No hardcoded values
5. **Reference**: ALWAYS check srsRAN first

---

## ğŸš€ MANDATORY START CHECKLIST

**COMPLETE ALL BEFORE ANY WORK:**
1. âœ… Read ENTIRE CLAUDE.md
2. âœ… ULTRATHINK about task
3. âœ… Read progress.md
4. âœ… Check external_integrations/
5. âœ… Prepare subagent context
6. âœ… Spawn subagent (NOT develop directly)
7. âœ… Validate with quicktest.sh
8. âœ… Update progress.md

**âš ï¸ INCOMPLETE CHECKLIST = DO NOT START âš ï¸**

---

# ğŸ”´ğŸ”´ğŸ”´ FINAL ENFORCEMENT REMINDERS ğŸ”´ğŸ”´ğŸ”´

## âš¡ RULE VIOLATIONS = PROJECT FAILURE âš¡
## ğŸ¤– NO SUBAGENTS = PROJECT FAILURE ğŸ¤–
## ğŸ§  NO ULTRATHINKING = PROJECT FAILURE ğŸ§ 
## ğŸ“‹ NO COMPLIANCE = PROJECT FAILURE ğŸ“‹

### MANDATORY PRACTICES SUMMARY:
1. **ALWAYS ULTRATHINK** - EVERY decision
2. **ALWAYS USE SUBAGENTS** - EVERY task
3. **ALWAYS UPDATE progress.md** - EVERY session
4. **ALWAYS TEST WITH quicktest.sh** - EVERY change
5. **ALWAYS CHECK external_integrations/** - BEFORE coding
6. **ALWAYS WRITE IN ENGLISH** - NO exceptions
7. **ALWAYS USE DOCKER** - ALL compilation/testing
8. **NEVER USE PLACEHOLDERS** - FULL implementation only

---

# ğŸ“¡ğŸ“¡ğŸ“¡ 5G SA CONFIGURATION REFERENCE ğŸ“¡ğŸ“¡ğŸ“¡
## MANDATORY NETWORK PARAMETERS

### ğŸ”§ Core Network Configuration
- **Open5GS**: Deployed via Docker Compose in `config/open5gs/`
- **PLMN**: 00101 (MCC=001, MNC=01)
- **TAC**: 7
- **AMF N2 Interface**: Port 38412 (SCTP)
- **WebUI**: Port 9999

### ğŸ“» Radio Configuration
- **Band**: 3 (1800 MHz FDD)
- **DL ARFCN**: 368500 (1842.5 MHz)
- **Bandwidth**: 10 MHz (52 PRBs)
- **Sub-Carrier Spacing**: 15 kHz (FDD only)
- **Sample Rate**: 23.04 MHz
- **FFT Size**: 1024
- **CP Length**: 72 samples (normal CP)

### ğŸ”Œ ZMQ Interface Configuration
```
gNodeB TX â†’ tcp://127.0.0.1:2000 â†’ UE RX
gNodeB RX â† tcp://127.0.0.1:2001 â† UE TX
```

### ğŸ“‹ Reference Configuration Files - SACRED AND UNTOUCHABLE!
All configuration files are in `config/` directory:
```
config/
â”œâ”€â”€ documentation/
â”‚   â””â”€â”€ 5g_sa_setup.md         # Complete 5G SA docs
â”œâ”€â”€ open5gs/
â”‚   â”œâ”€â”€ docker-compose.yml     # 5G Core deployment
â”‚   â”œâ”€â”€ config/amf.yaml        # AMF configuration
â”‚   â””â”€â”€ README.md              # Setup guide
â”œâ”€â”€ srsran_gnb/
â”‚   â””â”€â”€ gnb_zmq_10mhz.yml     # SACRED gNodeB config - DO NOT MODIFY!
â””â”€â”€ srsue/
    â””â”€â”€ ue_nr_zmq_10mhz.conf   # SACRED srsUE config - DO NOT MODIFY!
```

âš ï¸ **CRITICAL**: The 10MHz configurations are PROVEN to achieve RRC connection!
ğŸ”’ **NEVER MODIFY THESE FILES** - Adapt the Rust code instead!

### âš™ï¸ Critical Parameters to Match
1. **SSB**: Every 20 ms
2. **SIB1**: Every 160 ms
3. **CORESET#0**: Index 12
4. **PRACH**: Config Index 0
5. **Cell ID**: 1
6. **DMRS**: Positions defined

### ğŸš€ Quick Start Commands - USE SACRED CONFIGS ONLY!
```bash
# 1. Start Open5GS
cd config/open5gs
docker-compose up -d

# 2. Reference gNodeB - MUST USE SACRED 10MHz CONFIG!
cd /opt/srsRAN_Project/build
./apps/gnb/gnb -c /workspace/config/srsran_gnb/gnb_zmq_10mhz.yml

# 3. Run srsUE - MUST USE SACRED 10MHz CONFIG!
cd /opt/srsRAN_4G/build
./srsue/src/srsue /workspace/config/srsue/ue_nr_zmq_10mhz.conf
```

âš ï¸ **REMEMBER**: These configs are SACRED! They achieve RRC connection!

### ğŸ“Š Validation Checklist
- [ ] UE detects cell
- [ ] PRACH successful
- [ ] Registration complete
- [ ] Data plane active

### ğŸ”§ Test Setup
```bash
# ONLY 2 test scripts allowed (see TEST METHODOLOGY section):
./test_srsran.sh    # Test with srsRAN gNodeB (reference)
./test_albor.sh     # Test with Albor gNodeB (our implementation)

# Or use quicktest.sh wrapper:
./quicktest.sh --srsran  # Calls test_srsran.sh
./quicktest.sh           # Calls test_albor.sh (default)
```

### ğŸ“¡ Technical Parameters
**Physical Layer**:
- PSS/SSS: Subcarriers -31 to 31
- PBCH: 20 RBs around DC
- CORESET#0: 48 RBs from RB 0
- PDCCH: SI-RNTI (0xFFFF)
- DMRS: Amplitude 0.7071

**MAC Layer**:
- SIB1: ~100 bytes
- SI window: 20 ms
- PRACH: frame%16==1, slot 9
- RA window: 10 slots

**Network**:
- Open5GS: 10.53.1.0/24
- AMF: 10.53.1.2:38412
- UPF: 10.53.1.7
- MongoDB: 10.53.1.100
- DN: 10.45.0.0/16

### ğŸ“‹ Testing Workflow
1. Deploy Open5GS
2. Verify AMF on 38412
3. Start gNodeB
4. Start UE
5. Verify connectivity

### ğŸš¨ Common Issues
- Port conflicts on 2000/2001
- SCTP kernel support
- Network namespaces
- Timing (10s for Open5GS)

---

# ğŸš¨ğŸš¨ğŸš¨ FINAL WARNING ğŸš¨ğŸš¨ğŸš¨
## THIS IS NOT OPTIONAL!
## FOLLOW ALL RULES OR FAIL!
## USE SUBAGENTS OR FAIL!
## ULTRATHINK OR FAIL!
## NO EXCEPTIONS!

**REMEMBER: We REPLICATE srsRAN in Rust. Study first, implement second!**